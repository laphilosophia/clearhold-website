---
const navItems = [
  {
    title: 'Concepts',
    items: [
      { href: '/docs/mental-model', label: 'Mental Model' },
      { href: '/docs/architecture', label: 'Architecture' },
      { href: '/docs/decision-engine', label: 'Decision Engine' },
    ],
  },
  {
    title: 'Guides',
    items: [
      { href: '/docs/quick-start', label: 'Quick Start' },
      { href: '/docs/core-concepts', label: 'Core Concepts' },
    ],
  },
  {
    title: 'Reference',
    items: [
      { href: '/docs/api-reference', label: 'API Reference' },
      { href: '/docs/security', label: 'Security & Trust' },
      { href: '/docs/sdks', label: 'SDKs' },
    ],
  },
  {
    title: 'Support',
    items: [
      { href: '/docs/faq', label: 'FAQ' },
      { href: '/docs/changelog', label: 'Changelog' },
      { href: '/docs/legal', label: 'Legal' },
      { href: '/docs/pricing', label: 'Pricing' },
    ],
  },
]

const currentPath = Astro.url.pathname
function isActive(href: string) {
  return currentPath === href || currentPath.startsWith(href + '/')
}
---

<nav class="lg:text-sm lg:leading-6">
  {
    navItems.map((section, idx) => (
      <div
        class:list={['mb-8', idx === 0 ? '' : 'animate-fade-in-up']}
        style={idx > 0 ? `animation-delay: ${idx * 0.1}s` : ''}>
        <h5 class="mb-3 font-medium text-zinc-300 text-xs uppercase tracking-wider">
          {section.title}
        </h5>
        <ul class="space-y-1 border-l border-white/5">
          {section.items.map((item) => (
            <li>
              <a
                href={item.href}
                class:list={[
                  'block border-l -ml-px pl-4 py-1.5 transition-all duration-200 hover:border-indigo-400/50 hover:text-white',
                  isActive(item.href)
                    ? 'border-indigo-500 text-indigo-400 font-medium bg-indigo-500/5'
                    : 'border-transparent text-zinc-500',
                ]}>
                {item.label}
              </a>
            </li>
          ))}
        </ul>
      </div>
    ))
  }
</nav>
