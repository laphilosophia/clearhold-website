---
import Sidebar from '../components/Sidebar.astro'
import BaseLayout from '../layouts/BaseLayout.astro'

interface Props {
  title: string
  description?: string
  class?: string
}

const { title, description, class: className } = Astro.props
---

<BaseLayout title={title} description={description}>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: 'rgba(99, 102, 241, 0.05)',
        primaryTextColor: '#f4f4f5',
        primaryBorderColor: 'rgba(99, 102, 241, 0.4)',
        lineColor: '#6366f1',
        secondaryColor: '#18181b',
        tertiaryColor: '#09090b',
        fontFamily: '"Space Mono", monospace',
        fontSize: '13px',
        edgeLabelBackground: '#09090b',
        nodeBorder: '1px',
        mainBkg: 'rgba(18, 18, 20, 0.6)',
      },
      flowchart: {
        curve: 'basis',
        nodeSpacing: 50,
        rankSpacing: 40,
        htmlLabels: true,
      },
    })
  </script>

  <div class="mx-auto max-w-7xl px-6 lg:px-8 pt-24">
    <div class="lg:grid lg:grid-cols-12 lg:gap-10">
      <!-- Sidebar (Desktop) -->
      <aside
        class="hidden lg:block lg:col-span-3 py-10 sticky top-24 h-[calc(100vh-5rem)] overflow-y-auto scrollbar-thin"
      >
        <Sidebar />
      </aside>

      <!-- Main Content -->
      <main class="py-10 lg:col-span-9 animate-fade-in-up">
        <article class:list={['prose prose-zinc prose-invert max-w-none', className]}>
          <slot />
        </article>
      </main>
    </div>
  </div>
</BaseLayout>
